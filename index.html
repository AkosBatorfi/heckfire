<!DOCTYPE html>
<html>

<head>
    <style>
        body {
            background-color: rgb(48, 147, 180);
        }

        h1 {
            color: white;
            text-align: center;
            font-family: verdana;
        }

        h2 {
            color:darkblue;
            text-align: center;
            font-family: verdana;
        }
        h3 { 
            color:darkblue; 
            text-align: center; 
            font-family: verdana; 
        }

        p {
            font-family: verdana;
            font-size: 20px;
        }
    </style>
</head>

<body>
    <h1>&piv; Heckfire v0.2 &piv;</h1>

    <p id="events"></p>

    <script>
        //The list of quests and biomes
        var quests = ["Might", "Resource Gathering", "Troops", "Monster Slaying", "Construction", "Troops", "Monster Slaying", "Resource Gathering", "Research", "Troops", "Monster Slaying"];
        var biomes = ["Swamp","Grasslands","BadLands"];
        //The date I know to be when Might was, based on GMT+1
        var MightDate = new Date("Mar 5, 2018 17:00:00 GMT+0100");
        //The date I know to be when Swamp was, based on GMT+1
        var SwampDate = new Date("Mar 6, 2018 22:00:00 GMT+0100");
        
        function addZero(i) {
        if (i < 10) {
            i = "0" + i;
        }
        return i;
        }

        function listing() {
                //The date from the browser
                var now = new Date().getTime();
                var d = new Date();
                var remainingmin = 59 - d.getMinutes();
                var remainingsec = 59 - d.getSeconds();
                var remaininghours = 22 - (d.getHours()+1);
                var questtimediff = now - MightDate;
                var biometimediff = now - SwampDate;
                //Calculate the amount of hours the time difference is for quest and biome
                var hours = Math.floor(questtimediff / (1000 * 60 * 60));
                var bhours = Math.floor(biometimediff / (1000 * 60 * 60));
                var remaininghours = 23 - (bhours % 24);
                var bdays = Math.floor(biometimediff / (1000 * 60 * 60 * 24));
                //Calculate how many times we need to cycle through the quests loop
                var sequence = Math.floor(hours % 11);
                var bsequence = Math.floor(bdays % 3);
                var bsequencetomorrow = Math.floor((bdays+1) % 3);
                text = "<h3>" + biomes[bsequence] +" "+addZero(remaininghours)+":"+addZero(remainingmin)+":"+addZero(remainingsec)+"</h3>";
                text += "<h3>" + "Next Biome: " + biomes[bsequencetomorrow] + "</h3>";
                text += "<ul>";
                text += "<li> Current:" + quests[sequence] + "   "+addZero(remainingmin)+":"+addZero(remainingsec)+"</li>";
                for (i = 1; i < 23; i++) {
                    var sequence = Math.floor((hours + i) % 11);
                    text += "<li>" + quests[sequence] + "</li>";
                }
                text += "</ul>";
                document.getElementById("events").innerHTML = text;
        }
        listing();
        setInterval(listing, 1000);
    </script>

</body>

</html>